{% extends "layout.html" %}
{% block content %}
<div class="text-center mb-5">
    <h1 class="display-4 fw-900 uppercase ls-2">World Standings</h1>
    <p class="text-accent fw-900 uppercase ls-1">Survivor 50 Global Tournament</p>
</div>

{% if my_tribe %}
<div class="pro-card border-accent mb-5 bg-black">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-900 text-accent uppercase m-0">Your Global Entry</h4>
        <a href="{{ url_for('global_draft_page') }}" class="btn btn-sm btn-outline-light fw-900 uppercase ls-1">Edit Draft</a>
    </div>

    <div class="row g-3 text-center">
        <div class="col-4">
            <span class="d-block text-white fw-900 x-small uppercase ls-1 mb-1">Captain (2x)</span>
            <div class="p-2 border border-secondary rounded">
                <span class="text-accent fw-900">{{ my_tribe.cap1.name if my_tribe.cap1 else 'EMPTY' }}</span>
            </div>
        </div>
        <div class="col-4">
            <span class="d-block text-white fw-900 x-small uppercase ls-1 mb-1">Lieutenant (1.5x)</span>
            <div class="p-2 border border-secondary rounded">
                <span class="text-accent fw-900">{{ my_tribe.cap2.name if my_tribe.cap2 else 'EMPTY' }}</span>
            </div>
        </div>
        <div class="col-4">
            <span class="d-block text-white fw-900 x-small uppercase ls-1 mb-1">Sergeant (1.25x)</span>
            <div class="p-2 border border-secondary rounded">
                <span class="text-accent fw-900">{{ my_tribe.cap3.name if my_tribe.cap3 else 'EMPTY' }}</span>
            </div>
        </div>
    </div>

    <div class="mt-3 pt-3 border-top border-secondary">
        <span class="text-white fw-900 x-small uppercase ls-1 d-block mb-2">Squad Members:</span>
        <div class="d-flex flex-wrap gap-2">
            {% for p in my_tribe.regs %}
                <span class="badge border border-accent text-accent fw-900 uppercase px-3 py-2">{{ p.name }}</span>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<div class="pro-card border-secondary p-0 overflow-hidden">
    <table class="table table-dark table-hover m-0 h-contrast-table">
        <thead class="bg-darker">
            <tr class="text-white fw-900 x-small uppercase ls-1">
                <th class="ps-4 py-3">Rank</th>
                <th class="py-3">Owner</th>
                <th class="text-end pe-4 py-3">Points</th>
            </tr>
        </thead>
        <tbody class="border-top-0">
            {% for p in full_global_leaderboard %}
            <tr class="align-middle {% if p.user == session.username %}bg-accent-soft border-y-accent{% endif %}">
                <td class="ps-4 fw-900 text-accent">#{{ loop.index }}</td>
                <td class="fw-900 text-white uppercase ls-1">
                    {{ p.user }}
                    {% if p.user == session.username %}
                        <span class="ms-2 badge bg-accent text-dark">YOU</span>
                    {% endif %}
                </td>
                <td class="text-end pe-4 fw-900 fs-5 text-accent">{{ p.score }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
    .bg-darker { background: #0c0c0c; }
    .bg-accent-soft { background: rgba(255, 204, 0, 0.15) !important; }
    .border-y-accent { border-top: 2px solid var(--accent) !important; border-bottom: 2px solid var(--accent) !important; }
    .border-accent { border: 2px solid var(--accent) !important; }

    .x-small { font-size: 0.75rem; }

    /* Max Contrast Table Fixes */
    .h-contrast-table td {
        padding-top: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #333 !important;
    }

    .h-contrast-table thead th {
        border-bottom: 3px solid var(--accent) !important;
    }
</style>
{% endblock %}